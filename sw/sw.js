(function(){"use strict";const V={quickFetchPromises:new Map},re='<script>onload=()=>{navigator.serviceWorker.getRegistration().then(async n=>{if(!n?.waiting)return t();o();let a=0;for(;;){const r=performance.now(),s=await new Promise(e=>{navigator.serviceWorker.addEventListener("message",e,{once:!0}),setTimeout(()=>e(!1),500)});if(a++,s.data?.type==="vw-skipFailed"||a===100||!n.waiting)return t();o();const c=performance.now();await new Promise(e=>{setTimeout(()=>e(),100-(c-r))})}function o(){n.waiting?.postMessage({type:"conditionalSkipWaiting"})}}),navigator.serviceWorker.addEventListener("controllerchange",t);let i=!1;function t(){i||(i=!0,location.reload(),setInterval(()=>location.reload(),1e3))}}<\/script>';async function x(e){try{return await fetch(e)}catch{return Response.error()}}function E(e,t){e.forEach(n=>n.postMessage(t))}class q{constructor(){let t,n;this.promise=new Promise((s,a)=>{t=s,n=a}),this.resolve=t,this.reject=n}then(t,n){this.promise.then(t,n)}}const I="__vw_virtual__/",G="info",oe="vary";function ce(e,t,n=!1){if(e.method!=="GET")return!1;const s=(t.headers.get(oe)??"").split(",").map(i=>i.trim().toLowerCase()).filter(i=>i!=="");if(!n&&s.toString()==="*")return!1;const a=new Request(e.url,{headers:e.headers}).headers;for(const[i]of a)if(!(i==="accept"||i==="user-agent")&&s.includes(i))return!1;return!0}function le(e,t,n={}){return new Request(e,{...n,headers:D(e.headers,t)})}function ue(e,t){return new Response(e.body,{status:e.status,headers:D(e.headers,t)})}function fe(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t.toLowerCase(),n]))}function pe(e){return Object.entries(e).filter(([,t])=>t!=null)}function D(e,t){return pe({...Object.fromEntries(e),...fe(t)})}function we(e,t){let n=Array.from(e.headers).map(([a,i])=>[a.toLowerCase(),i]);return t&&(t=t.map(a=>a.toLowerCase()),n=n.filter(([a])=>t.includes(a))),[e.method,e.url,Object.fromEntries(n.sort((a,i)=>s(a[0],i[0])))];function s(a,i){return a<i?-1:a>i?1:0}}const Y="Ig3aQwtg629LOjiM",y=1,v=new Set([""]),j=new Set(["favicon.png","manifest.webmanifest","icons/128x128.png","icons/144x144.png","icons/152x152.png","icons/192x192.png","icons/256x256.png","icons/512x512.png","app/version.json","app/immutable/assets/0.b0c55d4b.css","app/immutable/assets/2.95c9df45.css","app/immutable/assets/close.3340d4bb.svg","app/immutable/assets/_layout.7eea4b0b.css","app/immutable/assets/_page.95c9df45.css","app/immutable/nodes/1.2eb83734.js","app/immutable/nodes/0.95611606.js","app/immutable/nodes/2.93dc4c59.js","app/immutable/chunks/scheduler.a4c4307f.js","app/immutable/chunks/index.0db527cf.js","app/immutable/chunks/singletons.504cc8e8.js","app/immutable/entry/app.f0401c27.js","app/immutable/entry/start.7c86def7.js"]),B=new Set([]),H=new Set([]),he=new Set([]),Z=new Set([]),de="sw",k=25,me=5,_="/Bagel-V2/",R="Bagel-V2-",ge=!1,ye=!0,T="no-cache",N=R+y,J=new Set([...v,...j,...B,...H,...he,...Z]),ve=new Set([...B,...H]),X=[...v].find(e=>e!=="")?.slice(-1)==="/",U=I+G,A=caches.open(N);let W=!1,P=null,F=new q,Q=-1/0;const Se=async({searchParams:e,request:t})=>{const n=e.get("url"),s=e.get("specified");if(n==null||s==null)return console.error("Versioned Worker quick fetch: invalid request."),Response.error();const a=new Request(n,t),i=JSON.stringify(we(a,JSON.parse(s))),o=V.quickFetchPromises.get(i);return o?(V.quickFetchPromises.delete(i),await o):await x(a)};addEventListener("install",e=>{e.waitUntil((async()=>{const t=await Re(),[n,s]=await be(t),a=new Set([...v,...j]),i=new Map;let o=!1;if(n){const r=new Map;if(await Promise.all(t.map(async c=>{const l=await caches.open(R+c),u=await l.match(U),f=u?await u.json():null;if(o)return;if(f?.majorFormatVersion!==1||f.tag!==Y){o=!0;return}const d=(await l.keys()).map(w=>new URL(w.url).pathname.slice(_.length));for(const w of d)r.has(w)||r.set(w,[l,n.get(w),c])})),o)p();else for(const[c,l]of r){let u=function(){i.set(c,l)};if(v.has(c))continue;const f=l[1]!=null;j.has(c)?f||(a.delete(c),u()):Z.has(c)?f?a.add(c):u():J.has(c)&&(!f||ve.has(c))&&u()}}else p();const h=await A;await Promise.all([...[...a].map(async r=>{r===""&&(r=_);const c=M(await fetch(r,{cache:T}));if(!O(c))throw"";await h.put(r,c)}),...[...i].map(async([r,[c,l]])=>{r===""&&(r=_);const u=await c.match(r);let f=parseInt(u.headers.get("vw-age"));isNaN(f)&&(f=0);let d;if(l){const[m,g]=l;d=m-1,f+=g}else{const m=parseInt(u.headers.get("vw-version"));isNaN(m)||f!==0&&(d=m)}const w=M(u,d,f);await h.put(r,w)})]),await ae(o?Math.max(2,s):s);function p(){t.length!=0&&console.warn("Versioned Worker: Performing clean install")}})())}),addEventListener("activate",e=>{e.waitUntil((async()=>{const t=clients.claim(),n=await caches.keys();for(const s of n)s.startsWith(R)&&s!==N&&await caches.delete(s);await t})())}),addEventListener("fetch",e=>{const t=e.request,n=new URL(t.url),s=n.pathname,a=s.slice(_.length),i=n.origin!==location.origin,o=!i&&a.startsWith(I),h=n.searchParams,p=ke(t,o,i,h);if(p==="force-passthrough")return;const r=t.method==="GET",c=t.method==="HEAD",l=t.mode==="navigate"&&r;if((r||c)&&a.slice(-1)==="/"!==X){const g=ne(a);if(v.has(g)){e.respondWith(Response.redirect(ne(t.url)));return}}const u=!i&&(r||c)&&J.has(a),f=o?a.slice(I.length):null,d=Pe(f,i);let w;const m={href:a,fullHref:s,virtualHref:f,searchParams:h,urlObj:n,isPage:l,isCrossOrigin:i,vwMode:p,inCacheList:u,request:t,event:e};d&&(w=d(m),ge)||e.respondWith((async()=>{if(l&&(registration.waiting||W)&&(await clients.matchAll()).length<2)return W=!1,new Response(re,{headers:{"content-type":"text/html","cache-control":"no-store"}});if(w&&(w=await w,w!=null))return w;if(p==="handle-only")return Response.error();if(i||!(r||c)){const S=await x(t);return await L(S,m,!1,!1,S.type==="error",!1)}const g=await A;if(u){const S=z(t,!0);let b=await g.match(S);if(b)return parseInt(b.headers.get("vw-version"))!==y?p==="no-network"||H.has(a)?(p!=="no-network"&&te(S,g,e),await L(b,m,!0,!0,null,!0)):await K(a,S,!0,l,b,g,e,m):await L(b,m,!0,!1,null,!0)}if(p==="no-network")return Response.error();let ie=u&&r;const Oe=z(t,ie);return await K(a,Oe,ie,l,u,g,e,m)})())}),addEventListener("message",e=>{const t=e.data;let n;t==="skipWaiting"?n={type:"skipWaiting"}:n=t,n.type==="skipWaiting"?skipWaiting():n.type==="conditionalSkipWaiting"?e.waitUntil((async()=>{const s=await clients.matchAll({includeUncontrolled:!0});if(s.length<2)n.resumableState===!0?E(s,{type:"vw-updateWithResumable"}):(P=n.resumableState,await Promise.race([skipWaiting(),new Promise(a=>setTimeout(()=>a(!0),100))])&&n.sendFinish&&registration.active?.postMessage({type:"finish"}),E(s,{type:"vw-reload"}),P&&await F);else{E(s,{type:"vw-skipFailed"});const a=performance.now(),i=a-Q;if(Q=a,i>5e3){const o=await C();o.blockedInstallCount++,await se(o)}}})()):n.type==="finish"?W=!0:n.type==="resume"?e.waitUntil((async()=>{const s=await clients.matchAll({includeUncontrolled:!0});E(s,{type:"vw-resume",data:P}),P=null,F.resolve(),F=new q})()):n.type==="getInfo"?e.waitUntil((async()=>{const s=await clients.matchAll({includeUncontrolled:!0});E(s,{type:"vw-info",info:await C()})})()):n.type});function Ee(e){e=e.split(`\r
`).join(`
`);const t=e.indexOf(`
`),n=e.slice(0,t)==="3";let s=[],a=[];if(n){const i=e.slice(t+1).split(`

`);s=i.map(o=>{let h=o.slice(1).split(`
`);return h[0]===""?[]:h}),a=i.map(o=>{const h=parseInt(o[0]);return o.slice(1).split(`
`)[0],h})}return{formatVersion:n?3:-1,updated:s,updatePriorities:a}}async function Re(){let e=[];const t=await caches.keys();for(const n of t)n.startsWith(R)&&n!==N&&e.push(parseInt(n.slice(R.length)));return e=e.sort((n,s)=>s-n),e}async function be(e){const t=[null,2];if(e.length===0)return t;const n=Math.max(...e);if(n>=y)return t;const s=Math.min(me-Math.ceil((y+1)/k),0),a=[Math.floor((n+1)/k)+s,Math.floor(y/k)+s];if(a[0]<0)return t;const i=(n+1)%k,o=a[1]-a[0]+1;let h=await Promise.all(Array.from(new Array(o),async(l,u)=>{let f=u+a[0];const d=await fetch(`${de}/${f}.txt`,{cache:T});return O(d)?Ee(await d.text()):null}));if(h.some(l=>l==null||l.formatVersion===-1))return t;let p=new Map,r=n+1,c=1;for(let l=0;l<h.length;l++){const u=h[l],f=l===0?i:0;for(let d=f;d<u.updated.length;d++){const w=u.updatePriorities[d];w>c&&(c=w);for(const m of u.updated[d]){const g=p.get(m);g?g[1]++:p.set(m,[r,1])}r++}}return[p,c]}const $=new Set(["default","force-passthrough","handle-only","no-network"]);function ke(e,t,n,s){const a=e.headers.get("vw-mode");if($.has(a))return a;const i=s.get("vw-mode");return $.has(i)?i:n&&ye?"force-passthrough":t?"handle-only":"default"}function M(e,t,n=0){return ue(e,{"vw-version":(t??y).toString(),"vw-age":n.toString()})}function z(e,t){return le(e,{range:null,"vw-mode":null},{method:t?"GET":e.method,cache:t?T:e.cache})}async function K(e,t,n,s,a,i,o,h){let[p,r]=await ee(t,s,!!a,e);return r===0?n&&te(t,i,o,p.clone()):typeof a!="boolean"&&(p=a),await L(p,h,!1,!1,r!==1,!0)}const _e=new Set(["default","basic"]);async function ee(e,t,n,s){let a;try{a=await fetch(e)}catch{return t&&v.has(s)?[new Response("Something went wrong. Please connect to the internet and try again."),1]:[Response.error(),1]}return O(a)?[n?M(a):a,0]:[a,2]}function te(e,t,n,s){n.waitUntil((async()=>{s==null&&([s]=await ee(e,!1,!0)),O(s)&&ce(e,s)&&s.status!==206&&await t.put(e,s)})())}async function L(e,t,n,s,a,i){i&&(e=Ae(e,t.request.method==="HEAD"));let o;return o||e}function Ae(e,t){return!t||e.body==null?e:(e.body.cancel(),new Response(null,{headers:e.headers}))}function O(e){return!(!e.ok||!_e.has(e.type))}function Pe(e,t){return t?void 0:e==="quick-fetch"?Se:e===G?Le:void 0}async function Le(){return new Response(JSON.stringify(await C()),{headers:{"content-type":"application/json"}})}function ne(e){return X?e+"/":e.slice(0,-1)}async function ae(e=0){const t={majorFormatVersion:1,minorFormatVersion:1,tag:Y,version:y,templateVersion:1,timeInstalled:Date.now(),blockedInstallCount:0,updatePriority:e};return await se(t),t}async function C(){let e=await(await A).match(U);return e?await e.json():await ae()}async function se(e){await(await A).put(U,new Response(JSON.stringify(e),{headers:{"content-type":"application/json"}}))}})();
